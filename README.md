# Merge Whisper Subtitles

Merge words in `.words.srt` files generated by
[whisper-timestamped](https://github.com/linto-ai/whisper-timestamped)
into easy-to-read subtitles.

## Installation

Python 3.9+ is required.

To run it:

```
git clone https://github.com/tpwo/merge-whisper-subtitles
cd merge-whisper-subtitles/
python3 -m merge_whisper_subtitles --help
```

## Background

[whisper-timestamped](https://github.com/linto-ai/whisper-timestamped)
is a tool for extracting text from audio.

Especially, it can extract standard subtitle `srt` files given video files as input.
It outputs two `srt` files.

"Standard" `srt` format:

```srt
4
00:00:56,480 --> 00:00:59,480
The real power of jazz and the innovation of jazz

5
00:00:59,600 --> 00:01:02,600
is that a group of people can come together and

6
00:01:03,620 --> 00:01:05,720
create art,
```

Word-based format:

```srt
20
00:00:56,600 --> 00:00:56,620
The

21
00:00:56,620 --> 00:00:56,980
real

22
00:00:56,980 --> 00:00:57,700
power

23
00:00:57,700 --> 00:00:57,960
of

24
00:00:57,960 --> 00:00:58,220
jazz
```

Unfortunately, the "standard" format tends to have way too long segments.
Often there are a few sentences joined together
which fills up the whole screen for a long time. E.g.

```srt
574
00:51:23,060 --> 00:51:33,580
And he would get tips based on how successful he was. So if he really came up with something hip when they'd do a little twist or turn that, they'd give him a little extra money.
```

## Solution

If we have word-based format,
instead of using broken "standard" `srt` files,
we can parse word-based format,
join words into segments,
and control the max length of a segment,
so subtitles are easy to read.

## Limitations

Timings generated by whisper-timestamped are not ideal.
Sometimes single words have too-long time-on-screen,
and can be displayed separately.

This tool is very simple and doesn't intend
to fix timings provided by whisper-timestamped.

Generated output should be good enough,
and definitely better than `srt` files from whisper-timestamped.

Still, it's far from ideal,
and manual adjustments are needed
to have it fully correct.
